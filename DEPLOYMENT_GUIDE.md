# Deployment Guide - Trading App

## Quick Deploy Options

### Option 1: Vercel (Recommended for Next.js)

Vercel is the best option for Next.js applications and offers free hosting.

#### Steps:

1. **Install Vercel CLI**
   ```bash
   npm install -g vercel
   ```

2. **Deploy Frontend**
   ```bash
   cd C:\Users\melvi\Downloads\TradingApp\frontend
   vercel
   ```
   
   Follow the prompts:
   - Login/Sign up to Vercel
   - Set up project name: `trading-app-demo`
   - Framework: Next.js (auto-detected)
   - Build command: `npm run build`
   - Output directory: `.next`

3. **Set Environment Variables**
   In Vercel dashboard:
   - Go to Project Settings → Environment Variables
   - Add: `NEXT_PUBLIC_API_URL` = `https://your-backend-url.com`

4. **Deploy Backend**
   ```bash
   cd C:\Users\melvi\Downloads\TradingApp\backend
   vercel
   ```

### Option 2: Netlify

1. **Install Netlify CLI**
   ```bash
   npm install -g netlify-cli
   ```

2. **Deploy Frontend**
   ```bash
   cd C:\Users\melvi\Downloads\TradingApp\frontend
   netlify deploy --prod
   ```

### Option 3: Railway (For Backend with Database)

Railway is great for deploying the backend with database support.

1. **Visit**: https://railway.app
2. **Click**: "Start a New Project"
3. **Deploy from GitHub**: Connect your repo
4. **Add PostgreSQL**: Click "New" → "Database" → "PostgreSQL"
5. **Set Environment Variables**:
   ```
   DATABASE_URL=<auto-generated>
   REDIS_URL=<add Redis service>
   JWT_SECRET=your-secret-key
   OPENAI_API_KEY=your-openai-key
   ```

### Option 4: Render (Full Stack)

1. **Frontend (Static Site)**
   - Visit: https://render.com
   - New → Static Site
   - Connect GitHub repo
   - Build command: `cd frontend && npm install && npm run build`
   - Publish directory: `frontend/.next`

2. **Backend (Web Service)**
   - New → Web Service
   - Build command: `cd backend && npm install && npm run build`
   - Start command: `cd backend && npm run start:prod`
   - Add environment variables

## Local Preview Build

Before deploying, test the production build locally:

### Frontend
```bash
cd frontend
npm run build
npm start
```
Visit: http://localhost:3000

### Backend
```bash
cd backend
npm run build
npm run start:prod
```
Visit: http://localhost:3001

## Environment Variables for Production

### Frontend (.env.production)
```env
NEXT_PUBLIC_API_URL=https://your-backend-url.com
NEXT_PUBLIC_WS_URL=wss://your-backend-url.com
```

### Backend (.env.production)
```env
DATABASE_URL=your-production-database-url
REDIS_HOST=your-redis-host
REDIS_PORT=6379
JWT_SECRET=your-strong-secret-key
OPENAI_API_KEY=your-openai-api-key
PORT=3001
NODE_ENV=production
CORS_ORIGIN=https://your-frontend-url.com
```

## Quick Deploy with Vercel (Easiest)

Run this command in your project root:

```bash
# Frontend
cd frontend
vercel --prod

# Backend  
cd ../backend
vercel --prod
```

Then update the frontend's `NEXT_PUBLIC_API_URL` environment variable in Vercel dashboard to point to your deployed backend URL.

## Database Options for Production

Since we're using SQLite locally, you'll need to switch to PostgreSQL for production:

1. **Update `backend/prisma/schema.prisma`**:
   ```prisma
   datasource db {
     provider = "postgresql"
     url      = env("DATABASE_URL")
   }
   ```

2. **Run migrations**:
   ```bash
   npx prisma migrate deploy
   ```

### Free PostgreSQL Providers:
- **Supabase**: https://supabase.com (Free tier: 500MB)
- **Neon**: https://neon.tech (Free tier: 3GB)
- **Railway**: https://railway.app (Free tier with credit)
- **ElephantSQL**: https://elephantsql.com (Free tier: 20MB)

## Redis for Production

### Free Redis Providers:
- **Upstash**: https://upstash.com (Free tier: 10K commands/day)
- **Redis Cloud**: https://redis.com/try-free (Free tier: 30MB)
- **Railway**: Includes Redis add-on

## SSL/HTTPS

All deployment platforms (Vercel, Netlify, Render, Railway) provide automatic SSL certificates.

## Custom Domain

After deployment, you can add a custom domain:
- Vercel: Project Settings → Domains
- Netlify: Site Settings → Domain Management
- Render: Settings → Custom Domains

## Monitoring & Logs

- **Vercel**: Real-time logs in dashboard
- **Railway**: Deployment logs and metrics
- **Render**: Logs tab in service dashboard

## Cost Estimate

### Free Tier (Recommended for Demo):
- **Frontend**: Vercel/Netlify (Free)
- **Backend**: Railway/Render (Free tier)
- **Database**: Supabase/Neon (Free tier)
- **Redis**: Upstash (Free tier)
- **Total**: $0/month

### Production Ready:
- **Frontend**: Vercel Pro ($20/month)
- **Backend**: Railway ($5-20/month)
- **Database**: Supabase Pro ($25/month)
- **Redis**: Upstash Pro ($10/month)
- **Total**: ~$60-75/month

## Need Help?

If you encounter issues:
1. Check deployment logs
2. Verify environment variables
3. Test production build locally first
4. Check CORS settings
5. Verify database connection

---

**Recommended Quick Start**: Use Vercel for both frontend and backend, with Supabase for PostgreSQL and Upstash for Redis. All have generous free tiers!
